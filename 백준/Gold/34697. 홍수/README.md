# [Gold V] 홍수 - 34697 

[문제 링크](https://www.acmicpc.net/problem/34697) 

### 성능 요약

메모리: 11884 KB, 시간: 104 ms

### 분류

그래프 이론, 그래프 탐색, 너비 우선 탐색, 깊이 우선 탐색, 방향 비순환 그래프

### 제출 일자

2026년 1월 27일 20:44:43

### 문제 설명

<p>대전과학고등학교에는 비가 내릴 때 효율적인 배수를 위해 $1$부터 $N$까지 번호가 붙은 $N$개의 하수구가 설치되어 있다. $i$번째 하수구는 높이 $h_i$를 가지고 있으며, 모든 하수구의 높이는 서로 다르다. 서로 다른 두 하수구를 연결하는 양방향 간선인 배수로가 $0$개 이상 존재한다. 임의의 두 하수구 사이에는 배수로가 최대 한 개만 존재한다.</p>

<p>가끔 하수구가 막히면 하수구에 물이 고이기도 한다.</p>

<p><strong>물이 고이지 않는 하수구</strong>는 다음 조건 1. 또는 조건 2.를 만족하는 하수구라고 재귀적으로 정의한다.</p>

<ol>
<li><strong>막히지 않은 하수구</strong>이다.</li>
<li>자신과 하나의 배수로로 연결된 하수구 중에서 <strong>물이 고이지 않는 하수구</strong>이며 자신보다 높이가 작은 하수구가 존재한다.</li>
</ol>

<p>만약 어떤 하수구가 <strong>물이 고이지 않는 하수구</strong>가 아니라면, 이 하수구는 <strong>물이 고이는 하수구</strong>이다.</p>

<p>만약 <strong>물이 고이는 하수구</strong>가 하나라도 존재한다면, 비가 많이 오는 날 학교에 홍수가 나고 말 것이다! 학교에 홍수가 날 것인지 판별해 보자.</p>

### 입력 

 <p>첫째 줄에 하수구의 개수 $N$과 배수로의 개수 $M$이 주어진다. $(1 \le N \le 200\,000;$ $0 \le M \le \min(200\,000, \cfrac{N \times (N - 1)}{2}))$</p>

<p>둘째 줄에 각 하수구의 높이를 나타내는 $N$개의 정수 $h_1, h_2, \dots, h_N$이 공백으로 구분되어 주어진다. $(1 \le h_i \le 10^9;$ $i \neq j$이면 $h_i \neq h_j)$</p>

<p>다음 $M$개의 줄에 걸쳐 정수 $u$와 $v$가 공백으로 구분되어 주어진다. 이는 $u$번 하수구와 $v$번 하수구가 배수로로 서로 연결되어 있음을 의미한다. 같은 배수로가 두 번 이상 주어지지 않는다. $(1 \le u < v \le N)$</p>

<p>다음 줄에 <strong>막히지 않은 하수구</strong>의 개수 $K$가 주어진다. $(1 \le K \le N)$</p>

<p>다음 줄에 <strong>막히지 않은 하수구</strong>의 번호를 나타내는 $K$개의 정수 $a_1, a_2, \cdots, a_K$가 공백으로 구분되어 주어진다. $(1 \le a_i \le N;$ 모든 $i \neq j$에 대해 $a_i \neq a_j)$</p>

### 출력 

 <p>모든 하수구가 <strong>물이 고이지 않는 하수구</strong>일 경우 <span style="color:#e74c3c;"><code>no flood</code></span>를 출력한다. <strong>물이 고이는 하수구</strong>가 하나라도 있을 경우 <span style="color:#e74c3c;"><code>flood</code></span>를 출력한다.</p>

